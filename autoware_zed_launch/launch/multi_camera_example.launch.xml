<?xml version="1.0"?>
<launch>
  <!-- Launch arguments -->
  <arg name="cam_names" default="[zed_front,zed_back]" description="List of camera names"/>
  <arg name="cam_models" default="[zedxm,zedxm]" description="List of camera models"/>
  <arg name="cam_serials" default="[59072113,50499972]" description="List of camera serial numbers"/>
  <arg name="use_sim_time" default="false" description="Use simulation clock"/>
  
  <!-- Launch ZED multi-camera with object detection -->
  <include file="$(find-pkg-share zed_launch)/launch/multi_camera_od.launch.xml">
    <arg name="cam_names" value="$(var cam_names)"/>
    <arg name="cam_models" value="$(var cam_models)"/>
    <arg name="cam_serials" value="$(var cam_serials)"/>
  </include>
  
  <!-- Launch converter node for front camera -->
  <include file="$(find-pkg-share autoware_zed_converter)/launch/converter_node.launch.xml">
    <arg name="node_name" value="zed_front_converter"/>
    <arg name="input_topic" value="/zed_multi/zed_front/obj_det/objects"/>
    <arg name="output_topic" value="/perception/object_recognition/objects/front"/>
    <arg name="use_sim_time" value="$(var use_sim_time)"/>
  </include>
  
  <!-- Launch converter node for back camera -->
  <include file="$(find-pkg-share autoware_zed_converter)/launch/converter_node.launch.xml">
    <arg name="node_name" value="zed_back_converter"/>
    <arg name="input_topic" value="/zed_multi/zed_back/obj_det/objects"/>
    <arg name="output_topic" value="/perception/object_recognition/objects/back"/>
    <arg name="use_sim_time" value="$(var use_sim_time)"/>
  </include>
</launch>
